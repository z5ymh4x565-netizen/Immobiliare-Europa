<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pianelle in terracotta - Materiali antichi per restauri autentici</title>
  <meta name="description" content="Pianelle in terracotta antiche, selezionate per pavimenti di casali, chiostri, borghi storici e restauri conservativi.">

  <style>
    /* ========== BASE ========== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f1eb;
      color: #222;
      line-height: 1.4;
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    /* ========== HEADER / TOPBAR ========== */
    header {
      width: 100%;
      z-index: 50;
      background: rgba(250,245,240,0.96);
      border-bottom: 1px solid #e3d7c7;
    }

    .topbar-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 10px 16px 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .topbar-row {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .logo-area {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .logo-img {
      height: 80px;
      width: auto;
    }

    nav {
      width: auto;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 18px;
      align-items: center;
      justify-content: center;
    }

    nav a {
      text-decoration: none;
      color: #3b3025;
      font-size: 0.9rem;
    }

    nav a:hover {
      text-decoration: underline;
    }

    .lang-switcher {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
    }

    .lang-switcher label {
      color: #6b5b4b;
    }

    .lang-switcher select {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #c9b9a5;
      background: #fdf6ec;
      font-size: 0.85rem;
      cursor: pointer;
    }

    /* ========== SIDEBAR CATEGORIE ========== */
    #menu-toggle {
      position: fixed;
      left: 16px;
      bottom: 16px;
      z-index: 60;
      border-radius: 999px;
      border: none;
      background: #3b3025;
      color: #fdf6ec;
      padding: 10px 16px;
      cursor: pointer;
      font-size: 0.9rem;
      box-shadow: 0 6px 20px rgba(0,0,0,0.18);
    }

    #menu-toggle:focus-visible {
      outline: 2px solid #f5b26b;
      outline-offset: 2px;
    }

    #sidebar {
      height: 100%;
      width: 0;
      position: fixed;
      top: 0;
      left: 0;
      background: #fdf7f0;
      border-right: 1px solid #e3d7c7;
      overflow: hidden;
      transition: width .3s ease, opacity .25s ease;
      opacity: 0;
      z-index: 100;
      padding-top: 60px;
    }

    #sidebar.open {
      width: 240px;
      opacity: 1;
    }

    #sidebar h3 {
      margin: 0 0 8px 18px;
      font-size: 0.8rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #8b7a6b;
    }

    #sidebar a {
      display: block;
      padding: 10px 18px;
      text-decoration: none;
      color: #3b3025;
      font-size: 0.9rem;
    }

    #sidebar a:hover {
      background: #efe3d5;
    }

    #overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.25);
      opacity: 0;
      transition: opacity .3s ease;
      z-index: 90;
    }

    #overlay.show {
      display: block;
      opacity: 1;
    }

    /* ========== HERO ========== */
    .hero {
      min-height: 55vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 16px 40px;
      background-image: url('hero-materiali.jpg');
      background-size: cover;
      background-position: center;
      position: relative;
      color: #fff;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        120deg,
        rgba(0,0,0,0.65),
        rgba(0,0,0,0.35)
      );
    }

    .hero-inner {
      position: relative;
      max-width: 900px;
      text-align: left;
    }

    .hero-kicker {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 0.75rem;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    .hero h1 {
      font-size: clamp(2.1rem, 3.5vw, 2.7rem);
      line-height: 1.1;
      margin-bottom: 14px;
    }

    .hero p {
      max-width: 560px;
      font-size: 1rem;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    /* ========== CONTENUTO ========== */
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 40px 16px 60px;
    }

    .section-header {
      margin-bottom: 22px;
    }

    .section-header h2 {
      font-size: 1.6rem;
      margin-bottom: 6px;
    }

    .section-header p {
      font-size: 0.95rem;
      color: #6b5b4b;
    }

    .prodotti-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 22px;
    }

    .prodotto {
      border-radius: 14px;
      background: #fff;
      border: 1px solid #e4d7c9;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 10px 28px rgba(0,0,0,0.04);
    }

    .prodotto-img-wrapper {
      position: relative;
      overflow: hidden;
    }

    .prodotto img {
      width: 100%;
      height: auto;
      transform: scale(1.02);
      transition: transform .3s ease;
    }

    .prodotto:hover img {
      transform: scale(1.06);
    }

    .tag-cat {
      position: absolute;
      left: 10px;
      top: 10px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 0.75rem;
    }

    .prodotto-body {
      padding: 14px 16px 12px;
      flex: 1;
    }

    .prodotto-body h3 {
      margin-bottom: 6px;
      font-size: 1.05rem;
    }

    .prodotto-body p {
      font-size: 0.9rem;
      color: #5f4f40;
    }

    .prodotto-footer {
      padding: 10px 16px 14px;
      border-top: 1px solid #f0e4d7;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.9rem;
    }

    .price {
      font-weight: 600;
      color: #8b5a2b;
    }

    .link-scheda {
      text-decoration: none;
      color: #1f66d1;
      font-weight: 500;
    }

    .link-scheda:hover {
      text-decoration: underline;
    }

    /* ========== SIMULATORE DI POSA (CSS, anche se la parte HTML non c'è ancora) ========== */
    .posa-configuratore {
      margin-top: 40px;
      padding: 24px 18px 26px;
      border-radius: 18px;
      background: #fff;
      border: 1px solid #e4d7c9;
      box-shadow: 0 10px 26px rgba(0,0,0,0.03);
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.1fr);
      gap: 22px;
      align-items: flex-start;
    }

    .posa-configuratore h2 {
      font-size: 1.3rem;
      margin-bottom: 8px;
    }

    .posa-configuratore .intro {
      font-size: 0.92rem;
      color: #6b5b4b;
      margin-bottom: 12px;
    }

    .posa-form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px 16px;
      align-items: flex-end;
      font-size: 0.9rem;
    }

    .posa-form-grid .campo,
    .posa-form-grid .campo-toggle {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .posa-form-grid label {
      font-size: 0.85rem;
      color: #6b5b4b;
    }

    .posa-form-grid input[type="number"],
    .posa-form-grid select {
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid #d6c7b7;
      background: #fdf7f0;
      font-size: 0.9rem;
      outline: none;
    }

    .posa-form-grid input[type="number"]:focus,
    .posa-form-grid select:focus {
      border-color: #f5b26b;
      box-shadow: 0 0 0 1px rgba(245,178,107,0.35);
    }

    .posa-form-grid button[type="submit"] {
      align-self: flex-start;
      padding: 8px 18px;
      border-radius: 999px;
      border: none;
      background: #3b3025;
      color: #fdf6ec;
      font-size: 0.88rem;
      cursor: pointer;
    }

    .posa-form-grid button[type="submit"]:hover {
      background: #524233;
    }

    .campo-toggle {
      flex-direction: row;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      color: #6b5b4b;
    }

    .posa-output {
      margin-top: 16px;
      padding: 10px 12px;
      border-radius: 12px;
      background: #f5f1eb;
      border: 1px solid #e2d6c7;
      font-size: 0.9rem;
    }

    .preview-posa-wrapper {
      display: flex;
      flex-direction: column;
      gap: 12px;
      font-size: 0.88rem;
    }

    .preview-posa {
      position: relative;
      border-radius: 12px;
      border: 1px solid #e2d6c7;
      background: #fdf7f0;
      min-height: 180px;
      overflow: hidden;
    }

    .preview-posa.show-grid .preview-posa-tile {
      box-shadow: 0 0 0 1px rgba(140,110,80,0.28) inset;
    }

    .preview-posa-tile {
      position: absolute;
      background: #e8d7c3;
      border-radius: 3px;
      transition: transform 0.15s ease-out;
    }

    .schema-descrizione {
      padding: 8px 10px;
      border-radius: 10px;
      background: #f9f2ea;
      border: 1px solid #e6d4c3;
      color: #5f4f40;
    }

    .schema-descrizione strong {
      font-weight: 600;
    }

    @media (max-width: 800px) {
      .posa-configuratore {
        grid-template-columns: 1fr;
      }
    }

    /* ========== CONTATTI ========== */
    .contatti {
      margin-top: 60px;
      border-radius: 18px;
      padding: 24px 18px 26px;
      background: #f1e4d6;
      border: 1px solid #dfcfbe;
    }

    .contatti-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
      gap: 18px;
      font-size: 0.95rem;
    }

    .contatti strong {
      font-weight: 600;
    }

    /* ========== FOOTER ========== */
    footer {
      text-align: center;
      padding: 20px 16px 30px;
      font-size: 0.8rem;
      color: #7a6a5b;
    }

    /* ========== MSG CARRELLO (se usato in futuro) ========== */
    .msg-carrello {
      position: fixed;
      top: 16px;
      right: 16px;
      background: #1f66d1;
      color: #fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 0.85rem;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity .25s ease, transform .25s ease;
      z-index: 200;
    }

    .msg-carrello.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
      .topbar-inner {
        padding: 10px 16px 14px;
      }

      .topbar-row {
        flex-direction: column;
        align-items: center;
      }

      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }

      .hero {
        text-align: left;
        padding-top: 60px;
      }

      .hero p {
        max-width: 100%;
      }

      .contatti-grid {
        grid-template-columns: 1fr;
      }

      #menu-toggle {
        font-size: 0.85rem;
        padding: 8px 14px;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="topbar-inner">
    <div class="topbar-row">
      <div class="logo-area">
        <img src="logo-immobiliare-europa.png" alt="Logo Immobiliare Europa - Materiali da Costruzione Antichi" class="logo-img">
      </div>

      <nav aria-label="Navigazione principale">
        <ul>
          <!-- ✅ Home corretto -->
          <li><a href="index.html" data-i18n="nav-home">Home</a></li>
          <li><a href="#prodotti" data-i18n="nav-products">Prodotti</a></li>
          <li><a href="#contatti" data-i18n="nav-contacts">Contatti</a></li>
        </ul>
      </nav>

      <div class="lang-switcher">
        <label for="language-switcher" data-i18n="lang-label">Lingua:</label>
        <select id="language-switcher">
          <option value="it">IT</option>
          <option value="en">EN</option>
          <option value="ru">RU</option>
          <option value="zh">中文</option>
          <option value="de_ch">DE-CH</option>
        </select>
      </div>
    </div>
  </div>
</header>

<button id="menu-toggle" aria-label="Apri menù categorie" aria-controls="sidebar" aria-expanded="false" data-i18n="btn-categories">
  ☰ Categorie
</button>

<aside id="sidebar" aria-label="Categorie materiali">
  <h3 data-i18n="sidebar-title">Categorie</h3>

  <!-- ✅ Niente "Tutte" e ordine alfabetico -->
  <a href="cementine.html" data-i18n="cat-cementine">Cementine</a>
  <a href="coppi.html" data-i18n="cat-coppi">Coppi</a>
  <a href="finiture-scale.html" data-i18n="cat-finiture-scale">Finiture per scale</a>
  <a href="graniglie.html" data-i18n="cat-graniglie">Graniglie</a>
  <a href="lavorati.html" data-i18n="cat-lavorati">Lavorati</a>
  <a href="mattoni.html" data-i18n="cat-mattoni">Mattoni</a>
  <a href="pianelle.html" data-i18n="cat-pianelle">Pianelle</a>
</aside>

<div id="overlay" aria-hidden="true"></div>

<div id="msg-carrello" class="msg-carrello" role="status" aria-live="polite">
  Prodotto aggiunto al carrello (demo)
</div>

<section class="hero" aria-labelledby="hero-title">
  <div class="hero-inner">
    <div class="hero-kicker" data-i18n="hero-kicker">Recupero e selezione</div>
    <h1 id="hero-title" data-i18n="mattoni-hero-title">Pianelle in terracotta antiche</h1>
    <p data-i18n="mattoni-hero-text">
      Pianelle in terracotta recuperate da casali, chiostri e dimore storiche, ideali per pavimenti interni di pregio e restauri conservativi.
    </p>
  </div>
</section>

<main>
  <section id="prodotti" aria-labelledby="prodotti-title">
    <div class="section-header">
      <h2 id="prodotti-title" data-i18n="mattoni-section-title">Pianelle per pavimenti in cotto</h2>
      <p data-i18n="mattoni-section-text">
        Le pianelle vengono selezionate per formato, colore e patina, per ottenere pavimenti omogenei e in armonia con l’architettura esistente.
      </p>
    </div>

    <div class="prodotti-grid">
      <article class="prodotto">
        <div class="prodotto-img-wrapper">
          <span class="tag-cat" data-i18n="tag-walls">Pavimenti</span>
          <img src="pianellerosse.jpg" alt="Pianelle antiche in terracotta per pavimenti">
        </div>
        <div class="prodotto-body">
          <h3 data-i18n="mattoni-card1-title">Pianelle in terracotta</h3>
          <p data-i18n="mattoni-card1-text">
            Pianelle in cotto originali, con superficie leggermente consumata dal tempo, ideali per soggiorni, cucine, taverne e ambienti storici.
          </p>
        </div>
        <div class="prodotto-footer">
          <span class="price" data-i18n="mattoni-card1-price">da €40 / m²</span>
          <a href="#contatti" class="link-scheda" data-i18n="mattoni-card-cta">Richiedi disponibilità</a>
        </div>
      </article>

      <article class="prodotto">
        <div class="prodotto-img-wrapper">
          <span class="tag-cat" data-i18n="tag-walls">Pavimenti</span>
          <img src="pianellemiste.jpg" alt="Pianelle in vari formati e pezzi speciali">
        </div>
        <div class="prodotto-body">
          <h3 data-i18n="mattoni-card2-title">Formati misti e pezzi speciali</h3>
          <p data-i18n="mattoni-card2-text">
            Lotti con formati misti, pianelle più grandi o più strette e pezzi speciali, adatti a riquadri, cornici e pose dall’aspetto più mosso.
          </p>
        </div>
        <div class="prodotto-footer">
          <span class="price" data-i18n="mattoni-card2-price">da €45 / m²</span>
          <a href="#contatti" class="link-scheda" data-i18n="mattoni-card-cta">Richiedi disponibilità</a>
        </div>
      </article>
    </div>
  </section>

  <section id="contatti" class="contatti" aria-labelledby="contatti-title">
    <div class="section-header">
      <h2 id="contatti-title" data-i18n="contacts-title">Contatti</h2>
      <p data-i18n="contacts-text">
        Inviaci misure, foto degli ambienti e qualche riferimento sul progetto: potremo proporti le pianelle più adatte e un lotto coerente per colore e formato.
      </p>
    </div>
    <div class="contatti-grid">
      <div>
        <p><strong data-i18n="contacts-email-label">Email:</strong> <a href="mailto:info@materialiantichi.it">info@materialiantichi.it</a></p>
        <p><strong data-i18n="contacts-phone-label">Telefono:</strong> <a href="tel:+393493002099">+39 349 300 2099</a></p>
        <p>
          <strong data-i18n="contacts-warehouse-label">Magazzino:</strong>
          <span data-i18n="contacts-warehouse-text">Contrada S. Pietro Vecchio 2 (FM) – su appuntamento</span>
        </p>
      </div>
      <div>
        <p data-i18n="contacts-extra-text">
          Possiamo fornire lotti omogenei per colore e formato, con spedizione in tutta Italia.
          Su richiesta inviamo foto dettagliate dei lotti disponibili prima della conferma dell’ordine.
        </p>
      </div>
    </div>
  </section>
</main>

<footer>
  <p data-i18n="footer-text">© 2025 Materiali da Costruzione Antichi – Immobiliare Europa</p>
</footer>

<script>
  const sidebar     = document.getElementById('sidebar');
  const overlay     = document.getElementById('overlay');
  const msgCarrello = document.getElementById('msg-carrello');
  const menuToggle  = document.getElementById('menu-toggle');
  const langSelect  = document.getElementById('language-switcher');

  let currentLang = 'it';

  const translations = {
    it: {
      'lang-label': 'Lingua:',
      'nav-home': 'Home',
      'nav-products': 'Prodotti',
      'nav-contacts': 'Contatti',
      'btn-categories': '☰ Categorie',
      'sidebar-title': 'Categorie',
      'cat-all': 'Tutte',
      'cat-pianelle': 'Pianelle',
      'cat-mattoni': 'Mattoni',
      'cat-coppi': 'Coppi',
      'cat-cementine': 'Cementine',
      'cat-graniglie': 'Graniglie',
      'cat-lavorati': 'Lavorati',
      'cat-finiture-scale': 'Finiture per scale',
      'hero-kicker': 'Recupero e selezione',
      'mattoni-hero-title': 'Pianelle in terracotta antiche',
      'mattoni-hero-text': 'Pianelle in terracotta recuperate da casali, chiostri e dimore storiche, ideali per pavimenti interni di pregio e restauri conservativi.',
      'mattoni-section-title': 'Pianelle per pavimenti in cotto',
      'mattoni-section-text': 'Le pianelle vengono selezionate per formato, colore e patina, per ottenere pavimenti omogenei e in armonia con l’architettura esistente.',
      'tag-walls': 'Pavimenti',
      'mattoni-card1-title': 'Pianelle in terracotta',
      'mattoni-card1-text': 'Pianelle in cotto originali, con superficie leggermente consumata dal tempo, ideali per soggiorni, cucine, taverne e ambienti storici.',
      'mattoni-card1-price': 'da €40 / m²',
      'mattoni-card2-title': 'Formati misti e pezzi speciali',
      'mattoni-card2-text': 'Lotti con formati misti, pianelle più grandi o più strette e pezzi speciali, adatti a riquadri, cornici e pose dall’aspetto più mosso.',
      'mattoni-card2-price': 'da €45 / m²',
      'mattoni-card-cta': 'Richiedi disponibilità',
      'contacts-title': 'Contatti',
      'contacts-text': 'Inviaci misure, foto degli ambienti e qualche riferimento sul progetto: potremo proporti le pianelle più adatte e un lotto coerente per colore e formato.',
      'contacts-email-label': 'Email:',
      'contacts-phone-label': 'Telefono:',
      'contacts-warehouse-label': 'Magazzino:',
      'contacts-warehouse-text': 'Contrada S. Pietro Vecchio 2 (FM) – su appuntamento',
      'contacts-extra-text': 'Possiamo fornire lotti omogenei per colore e formato, con spedizione in tutta Italia. Su richiesta inviamo foto dettagliate dei lotti disponibili prima della conferma dell’ordine.',
      'footer-text': '© 2025 Materiali da Costruzione Antichi – Immobiliare Europa',
      'cart-message': '{product} aggiunto al carrello (demo)',
      'sim-output-default': 'Inserisci i dati e premi Calcola quantità.',
      'sim-schema-desc': 'Posa dritta: le pianelle sono allineate in file regolari.'
    },
    en: {
      'lang-label': 'Language:',
      'nav-home': 'Home',
      'nav-products': 'Products',
      'nav-contacts': 'Contacts',
      'btn-categories': '☰ Categories',
      'sidebar-title': 'Categories',
      'cat-all': 'All',
      'cat-pianelle': 'Floor tiles',
      'cat-mattoni': 'Bricks',
      'cat-coppi': 'Roof tiles',
      'cat-cementine': 'Cement tiles',
      'cat-graniglie': 'Terrazzo tiles',
      'cat-lavorati': 'Worked elements',
      'cat-finiture-scale': 'Stair finishes',
      'hero-kicker': 'Salvaged & selected',
      'mattoni-hero-title': 'Antique terracotta floor tiles',
      'mattoni-hero-text': 'Reclaimed terracotta tiles from farmhouses, cloisters and historic homes, ideal for high-quality indoor floors and conservation work.',
      'mattoni-section-title': 'Terracotta floor tiles',
      'mattoni-section-text': 'Each batch of floor tiles is selected for size, colour and patina, to create homogeneous floors in harmony with the existing architecture.',
      'tag-walls': 'Floors',
      'mattoni-card1-title': 'Terracotta floor tiles',
      'mattoni-card1-text': 'Original terracotta floor tiles with a slightly worn surface, ideal for living rooms, kitchens, wine cellars and historic interiors.',
      'mattoni-card1-price': 'from €40 / m²',
      'mattoni-card2-title': 'Mixed sizes and special pieces',
      'mattoni-card2-text': 'Batches with mixed formats, larger or narrower tiles and special pieces, suitable for borders, frames and more dynamic laying patterns.',
      'mattoni-card2-price': 'from €45 / m²',
      'mattoni-card-cta': 'Request availability',
      'contacts-title': 'Contacts',
      'contacts-text': 'Send us measurements, photos of the rooms and a few project details: we will suggest the most suitable floor tiles and a consistent batch in colour and size.',
      'contacts-email-label': 'Email:',
      'contacts-phone-label': 'Phone:',
      'contacts-warehouse-label': 'Warehouse:',
      'contacts-warehouse-text': 'Contrada S. Pietro Vecchio 2 (FM) – by appointment only',
      'contacts-extra-text': 'We can supply homogeneous batches in colour and size, with shipping throughout Italy. On request we send detailed photos of the available batches before confirming the order.',
      'footer-text': '© 2025 Antique Building Materials – Immobiliare Europa',
      'cart-message': '{product} added to cart (demo)',
      'sim-output-default': 'Enter the data and press Calculate quantity.',
      'sim-schema-desc': 'Straight pattern: tiles are aligned in regular rows.'
    },
    ru: {
      'lang-label': 'Язык:',
      'nav-home': 'Главная',
      'nav-products': 'Материалы',
      'nav-contacts': 'Контакты',
      'btn-categories': '☰ Категории',
      'sidebar-title': 'Категории',
      'cat-all': 'Все',
      'cat-pianelle': 'Плитка',
      'cat-mattoni': 'Кирпич',
      'cat-coppi': 'Черепица',
      'cat-cementine': 'Цементные плитки',
      'cat-graniglie': 'Гранитные плиты',
      'cat-lavorati': 'Обработанные элементы',
      'cat-finiture-scale': 'Отделка лестниц',
      'hero-kicker': 'Отбор и восстановление',
      'mattoni-hero-title': 'Старинные терракотовые плитки',
      'mattoni-hero-text': 'Терракотовые плитки из старинных усадеб, клуатров и исторических домов — идеальны для престижных полов и реставрационных работ.',
      'mattoni-section-title': 'Плитка из терракоты для полов',
      'mattoni-section-text': 'Каждая партия отбирается по формату, цвету и патине, чтобы получить однородные полы, гармонирующие с существующей архитектурой.',
      'tag-walls': 'Полы',
      'mattoni-card1-title': 'Терракотовые плитки',
      'mattoni-card1-text': 'Оригинальные терракотовые плитки с поверхностью, слегка состаренной временем. Подходят для гостиных, кухонь, подвалов и исторических интерьеров.',
      'mattoni-card1-price': 'от 40 € / м²',
      'mattoni-card2-title': 'Смешанные форматы и специальные элементы',
      'mattoni-card2-text': 'Партии со смешанными форматами, более крупными или более узкими плитками и специальными элементами для рамок, бордюров и более динамичной укладки.',
      'mattoni-card2-price': 'от 45 € / м²',
      'mattoni-card-cta': 'Уточнить наличие',
      'contacts-title': 'Контакты',
      'contacts-text': 'Пришлите нам размеры, фотографии помещений и описание проекта — мы подберём подходящие плитки и однородную партию по цвету и формату.',
      'contacts-email-label': 'Email:',
      'contacts-phone-label': 'Телефон:',
      'contacts-warehouse-label': 'Склад:',
      'contacts-warehouse-text': 'Contrada S. Pietro Vecchio 2 (FM) – по предварительной записи',
      'contacts-extra-text': 'Мы поставляем однородные партии по цвету и формату с доставкой по всей Италии. По запросу высылаем подробные фотографии доступных партий до подтверждения заказа.',
      'footer-text': '© 2025 Старинные строительные материалы – Immobiliare Europa',
      'cart-message': '{product} добавлен в корзину (демо)',
      'sim-output-default': 'Введите данные и нажмите «Рассчитать количество».',
      'sim-schema-desc': 'Прямая укладка: плитки выровнены в ровные ряды.'
    },
    zh: {
      'lang-label': '语言：',
      'nav-home': '首页',
      'nav-products': '产品',
      'nav-contacts': '联系方式',
      'btn-categories': '☰ 分类',
      'sidebar-title': '分类',
      'cat-all': '全部',
      'cat-pianelle': '地砖',
      'cat-mattoni': '砖',
      'cat-coppi': '屋瓦',
      'cat-cementine': '水泥花砖',
      'cat-graniglie': '水磨石',
      'cat-lavorati': '加工构件',
      'cat-finiture-scale': '楼梯饰面',
      'hero-kicker': '回收与精选',
      'mattoni-hero-title': '古董陶土地砖',
      'mattoni-hero-text': '从农舍、回廊和历史宅邸中回收的陶土地砖，非常适合用于高品质室内地面和文物修复工程。',
      'mattoni-section-title': '陶土地面砖',
      'mattoni-section-text': '每一批地砖都根据尺寸、颜色和包浆精心筛选，以获得与原有建筑风格协调统一的地面效果。',
      'tag-walls': '地面',
      'mattoni-card1-title': '陶土老地砖',
      'mattoni-card1-text': '原装陶土地砖，表面略带岁月磨损，适用于客厅、厨房、地下室和历史空间。',
      'mattoni-card1-price': '每平方米起价 €40',
      'mattoni-card2-title': '混合规格与特殊构件',
      'mattoni-card2-text': '包含多种规格的批次，包括更大或更窄的砖块以及特殊构件，适合用于边框、分区和更具变化感的铺装方式。',
      'mattoni-card2-price': '每平方米起价 €45',
      'mattoni-card-cta': '咨询库存',
      'contacts-title': '联系方式',
      'contacts-text': '请将尺寸、空间照片以及项目简要说明发给我们，我们会为您推荐最合适的地砖以及在颜色和尺寸上尽量统一的批次。',
      'contacts-email-label': '邮箱：',
      'contacts-phone-label': '电话：',
      'contacts-warehouse-label': '仓库：',
      'contacts-warehouse-text': 'Contrada S. Pietro Vecchio 2 (FM) – 需提前预约',
      'contacts-extra-text': '我们可提供在颜色和规格上尽量一致的整批材料，并可配送至意大利各地。确认订单前，可按需提供现货批次的详细照片。',
      'footer-text': '© 2025 古建建筑材料 – Immobiliare Europa',
      'cart-message': '已将 {product} 加入购物车（演示）',
      'sim-output-default': '输入数据并点击“计算数量”。',
      'sim-schema-desc': '直铺方式：砖按规则行排列。'
    },
    de_ch: {
      'lang-label': 'Sprache:',
      'nav-home': 'Startseite',
      'nav-products': 'Materialien',
      'nav-contacts': 'Kontakt',
      'btn-categories': '☰ Kategorien',
      'sidebar-title': 'Kategorien',
      'cat-all': 'Alle',
      'cat-pianelle': 'Bodenplatten',
      'cat-mattoni': 'Ziegel',
      'cat-coppi': 'Dachziegel',
      'cat-cementine': 'Zementfliesen',
      'cat-graniglie': 'Terrazzofliesen',
      'cat-lavorati': 'Bearbeitete Elemente',
      'cat-finiture-scale': 'Treppenbeläge',
      'hero-kicker': 'Rückgewinnung & Auswahl',
      'mattoni-hero-title': 'Antike Terrakotta-Bodenplatten',
      'mattoni-hero-text': 'Terrakotta-Platten aus Bauernhäusern, Kreuzgängen und historischen Gebäuden – ideal für hochwertige Innenböden und denkmalgerechte Restaurierungen.',
      'mattoni-section-title': 'Terrakotta-Bodenbeläge',
      'mattoni-section-text': 'Jede Charge wird nach Format, Farbe und Patina ausgewählt, um gleichmässige Böden zu erhalten, die mit der bestehenden Architektur harmonieren.',
      'tag-walls': 'Böden',
      'mattoni-card1-title': 'Terrakotta-Bodenplatten',
      'mattoni-card1-text': 'Originale Terrakotta-Platten mit leicht gealterter Oberfläche, ideal für Wohnräume, Küchen, Gewölbekeller und historische Innenräume.',
      'mattoni-card1-price': 'ab €40 / m²',
      'mattoni-card2-title': 'Gemischte Formate und Spezialstücke',
      'mattoni-card2-text': 'Chargen mit gemischten Formaten, grösseren oder schmaleren Platten und Spezialstücken, geeignet für Rahmen, Bordüren und lebhaftere Verlegemuster.',
      'mattoni-card2-price': 'ab €45 / m²',
      'mattoni-card-cta': 'Verfügbarkeit anfragen',
      'contacts-title': 'Kontakt',
      'contacts-text': 'Senden Sie uns Masse, Fotos der Räume und einige Projektdetails – wir empfehlen passende Bodenplatten und eine einheitliche Charge in Farbe und Format.',
      'contacts-email-label': 'E-Mail:',
      'contacts-phone-label': 'Telefon:',
      'contacts-warehouse-label': 'Lager:',
      'contacts-warehouse-text': 'Contrada S. Pietro Vecchio 2 (FM) – nach Terminvereinbarung',
      'contacts-extra-text': 'Wir liefern homogene Chargen in Farbe und Format, mit Versand in ganz Italien. Auf Wunsch senden wir Detailfotos der verfügbaren Chargen vor der Auftragsbestätigung.',
      'footer-text': '© 2025 Antike Baumaterialien – Immobiliare Europa',
      'cart-message': '{product} zum Warenkorb hinzugefügt (Demo)',
      'sim-output-default': 'Geben Sie die Daten ein und klicken Sie auf Menge berechnen.',
      'sim-schema-desc': 'Gerades Verlegemuster: Platten sind in regelmässigen Reihen ausgerichtet.'
    }
  };

  function setLanguage(lang) {
    currentLang = lang;
    document.documentElement.lang = (lang === 'de_ch') ? 'de-CH' : lang;

    const dict = translations[lang] || translations['it'];
    document.querySelectorAll('[data-i18n]').forEach((el) => {
      const key = el.getAttribute('data-i18n');
      if (dict[key]) {
        el.textContent = dict[key];
      }
    });

    if (dict['btn-categories']) {
      menuToggle.textContent = dict['btn-categories'];
      menuToggle.setAttribute('aria-label', dict['btn-categories']);
    }
  }

  function openSidebar() {
    sidebar.classList.add('open');
    overlay.classList.add('show');
    menuToggle.setAttribute('aria-expanded', 'true');
  }

  function closeSidebar() {
    sidebar.classList.remove('open');
    overlay.classList.remove('show');
    menuToggle.setAttribute('aria-expanded', 'false');
  }

  menuToggle.onclick = () => {
    const open = sidebar.classList.contains('open');
    if (open) {
      closeSidebar();
    } else {
      openSidebar();
    }
  };

  overlay.onclick = () => {
    closeSidebar();
  };

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && sidebar.classList.contains('open')) {
      closeSidebar();
    }
  });

  // ✅ Lingua persistente come nelle altre pagine
  const savedLang = localStorage.getItem('site-lang') || 'it';
  currentLang = savedLang;
  langSelect.value = savedLang;
  setLanguage(savedLang);

  langSelect.addEventListener('change', (e) => {
    const newLang = e.target.value;
    localStorage.setItem('site-lang', newLang);
    setLanguage(newLang);
  });

  function add(nome, prezzo, id) {
    const dict = translations[currentLang] || translations['it'];
    const template = dict['cart-message'] || translations['it']['cart-message'];
    const msg = template.replace('{product}', nome);
    if (!msgCarrello) return;
    msgCarrello.textContent = msg;
    msgCarrello.classList.add('show');
    setTimeout(() => msgCarrello.classList.remove('show'), 1500);
  }

  // --- Simulatore di posa per pianelle (protetto se i campi non esistono nella pagina) ---
  const FATTORI_SFRIDO = {
    dritta: 1.05,
    diagonale: 1.08,
    spina45: 1.10,
    spina90: 1.10,
    modulare: 1.12
  };

  function calcolaPosa() {
    const roomLengthEl = document.getElementById('room-length');
    if (!roomLengthEl) return; // se il simulatore non è presente, esci silenziosamente

    const L = parseFloat(roomLengthEl.value);
    const W = parseFloat(document.getElementById('room-width').value);
    const tLcm = parseFloat(document.getElementById('tile-length').value);
    const tWcm = parseFloat(document.getElementById('tile-width').value);
    const fugaCm = parseFloat(document.getElementById('fuga-width').value);
    const schema = document.getElementById('schema-posa').value;

    if (isNaN(L) || isNaN(W) || isNaN(tLcm) || isNaN(tWcm) || isNaN(fugaCm) ||
        L <= 0 || W <= 0 || tLcm <= 0 || tWcm <= 0 || fugaCm < 0.5 || fugaCm > 1) {
      alert("Inserisci valori validi per stanza, pianelle e fuga (0,5–1 cm).");
      return;
    }

    const areaStanza = L * W;
    const tLm = tLcm / 100;
    const tWm = tWcm / 100;
    const fugaM = fugaCm / 100;

    const areaPianella = tLm * tWm;
    const modLm = tLm + fugaM;
    const modWm = tWm + fugaM;
    const areaModulo = modLm * modWm;

    if (areaPianella <= 0 || areaModulo <= 0) {
      alert("Le dimensioni delle pianelle non possono essere nulle.");
      return;
    }

    const basePezzi = areaStanza / areaModulo;
    const pezziUtili = Math.ceil(basePezzi);
    const fattore = FATTORI_SFRIDO[schema] || 1.05;
    const pezziTotali = Math.ceil(pezziUtili * fattore);
    const mqCopertiTeorici = pezziUtili * areaModulo;

    const output = document.getElementById('posa-output');
    if (!output) return;

    output.innerHTML = `
      <strong>Risultato stimato:</strong><br>
      Superficie stanza: <strong>${areaStanza.toFixed(2)} m²</strong><br>
      Dimensione pianella: <strong>${tLcm.toFixed(1)} × ${tWcm.toFixed(1)} cm</strong><br>
      Larghezza fuga considerata: <strong>${fugaCm.toFixed(1)} cm</strong><br>
      Superficie coperta per modulo (pianella + fuga): <strong>${areaModulo.toFixed(4)} m²</strong><br>
      Schema di posa: <strong>${schemaNome(schema)}</strong> (sfrido circa ${(fattore - 1) * 100}% )<br>
      Pianelle posate a terra (con eventuali tagli lungo i bordi): <strong>${pezziUtili}</strong><br>
      Pianelle totali consigliate (incluso sfrido): <strong>${pezziTotali}</strong><br>
      Superficie stanza effettivamente coperta: <strong>${areaStanza.toFixed(2)} m²</strong><br>
      Superficie teorica coperta dai pezzi interi (prima dei tagli): <strong>${mqCopertiTeorici.toFixed(2)} m²</strong>
    `;

    aggiornaPreview(schema, L, W, tLm, tWm, fugaM);
    aggiornaDescrizione(schema);
  }

  function schemaNome(key) {
    switch (key) {
      case "dritta": return "Posa dritta (a correre)";
      case "diagonale": return "Posa diagonale";
      case "spina45": return "Posa a spina di pesce 45°";
      case "spina90": return "Posa a spina di pesce 90°";
      case "modulare": return "Posa modulare / opera incerta";
      default: return key;
    }
  }

  function aggiornaPreview(schema, L, W, tLm, tWm, fugaM) {
    const container = document.getElementById('preview-posa');
    if (!container) return;

    container.innerHTML = "";
    container.className = "preview-posa schema-" + schema;

    const toggle = document.getElementById('toggle-fughe');
    if (toggle && toggle.checked) {
      container.classList.add('show-grid');
    }

    if (!L || !W) { L = 4; W = 3; }
    if (!tLm || !tWm) { tLm = 0.30; tWm = 0.15; }
    fugaM = fugaM || 0;

    const containerWidth = container.clientWidth || 260;
    const maxHeight = 260;

    const maxSide = Math.max(L, W);
    let pxPerMeter = containerWidth / maxSide;

    let heightPx = W * pxPerMeter;
    if (heightPx > maxHeight) {
      const fattore = maxHeight / heightPx;
      pxPerMeter *= fattore;
      heightPx = W * pxPerMeter;
    }
    container.style.height = heightPx + "px";

    let gapPx = fugaM * pxPerMeter;
    if (gapPx > 3) gapPx = 3;

    const tileLengthPx = tLm * pxPerMeter - gapPx;
    const tileWidthPx  = tWm * pxPerMeter - gapPx;

    if (schema === "spina45" || schema === "spina90") {
      disegnaSpinaDiPesce(container, schema, containerWidth, heightPx, tileLengthPx, tileWidthPx, gapPx);
      return;
    }

    const stepX = tileLengthPx + gapPx;
    const stepY = tileWidthPx  + gapPx;

    const tilesAlongL = Math.ceil(containerWidth / stepX) + 1;
    const tilesAlongW = Math.ceil(heightPx     / stepY) + 1;

    for (let iy = 0; iy < tilesAlongW; iy++) {
      for (let ix = 0; ix < tilesAlongL; ix++) {
        const tile = document.createElement('div');
        tile.className = "preview-posa-tile";

        let pxX = ix * stepX + gapPx / 2;
        let pxY = iy * stepY + gapPx / 2;
        let w = tileLengthPx;
        let h = tileWidthPx;
        let rotation = 0;

        switch (schema) {
          case "dritta":
            if (iy % 2 === 1) {
              pxX += stepX / 2;
            }
            break;

          case "diagonale":
            rotation = 45;
            break;

          case "modulare":
            if ((ix + iy) % 3 === 0) {
              w = tileLengthPx * 1.3;
            } else if ((ix + iy) % 3 === 1) {
              h = tileWidthPx * 0.7;
            }
            break;
        }

        tile.style.width = w + "px";
        tile.style.height = h + "px";
        tile.style.left = pxX + "px";
        tile.style.top  = pxY + "px";

        if (rotation !== 0) {
          tile.style.transform = "rotate(" + rotation + "deg)";
          tile.style.transformOrigin = "center center";
        }

        container.appendChild(tile);
      }
    }
  }

  function disegnaSpinaDiPesce(container, schema, containerWidth, heightPx, tileLengthPx, tileWidthPx, gapPx) {
    const lungo = tileLengthPx - (gapPx || 0);
    const corto = tileWidthPx - (gapPx || 0);
    const passo = lungo + corto;
    const extra = passo * 2;

    for (let y = -extra; y < heightPx + extra; y += passo) {
      for (let x = -extra; x < containerWidth + extra; x += passo) {
        const moduloIndex = Math.floor(x / passo) + Math.floor(y / passo);

        const tile = document.createElement('div');
        tile.className = "preview-posa-tile";

        const cx = x + passo / 2;
        const cy = y + passo / 2;

        const rotBase = (schema === "spina45") ? 45 : 0;
        const dir = (moduloIndex % 2 === 0) ? 1 : -1;

        tile.style.width = lungo + "px";
        tile.style.height = corto + "px";
        tile.style.left = (cx - lungo / 2) + "px";
        tile.style.top  = (cy - corto / 2) + "px";
        tile.style.transformOrigin = "center center";
        tile.style.transform = "rotate(" + (rotBase + 45 * dir) + "deg)";

        container.appendChild(tile);
      }
    }
  }

  const DESCRIZIONI_POSA = {
    dritta: "le pianelle sono posate parallelamente alle pareti, in file regolari.",
    diagonale: "le file sono ruotate di 45° rispetto alle pareti, ideale per ambienti irregolari.",
    spina45: "pianelle disposte a spina di pesce a 45°, effetto molto decorativo.",
    spina90: "pianelle disposte a spina di pesce a 90°, segno grafico più marcato.",
    modulare: "formati misti e moduli irregolari, ispirati alle pose storiche ad opera incerta."
  };

  function aggiornaDescrizione(schema) {
    const box = document.getElementById('schema-descrizione');
    if (!box) return;
    const testo = DESCRIZIONI_POSA[schema] || "";
    box.innerHTML = `<strong>${schemaNome(schema)}:</strong> ${testo}`;
  }

  function triggerRicalcolo() {
    calcolaPosa();
  }

  // Attacco gli event listener SOLO se gli elementi del simulatore esistono
  const schemaPosaEl = document.getElementById('schema-posa');
  const fugaWidthEl = document.getElementById('fuga-width');
  const roomLengthEl = document.getElementById('room-length');
  const roomWidthEl = document.getElementById('room-width');
  const tileLengthEl = document.getElementById('tile-length');
  const tileWidthEl = document.getElementById('tile-width');
  const toggleFughe = document.getElementById('toggle-fughe');

  if (schemaPosaEl && fugaWidthEl && roomLengthEl && roomWidthEl && tileLengthEl && tileWidthEl) {
    schemaPosaEl.addEventListener('change', triggerRicalcolo);
    fugaWidthEl.addEventListener('change', triggerRicalcolo);
    roomLengthEl.addEventListener('input', triggerRicalcolo);
    roomWidthEl.addEventListener('input', triggerRicalcolo);
    tileLengthEl.addEventListener('input', triggerRicalcolo);
    tileWidthEl.addEventListener('input', triggerRicalcolo);

    if (toggleFughe) {
      toggleFughe.addEventListener('change', triggerRicalcolo);
    }

    triggerRicalcolo();
  }
</script>

</body>
</html>
    the assistant’s answer was cut off here
